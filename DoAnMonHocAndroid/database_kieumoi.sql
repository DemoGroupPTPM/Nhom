CREATE DATABASE Ql_CuaHangDT_Android
USE Ql_CuaHangDT_Android
GO

CREATE TABLE NHANVIEN(
	MANV nvarchar(50) PRIMARY KEY,-- tên đăng nhập
	MATKHAU NVARCHAR(100),
	TENNV NVARCHAR(100),
	DIACHI NVARCHAR(100),
	DIENTHOAI NVARCHAR(10),
	MAPHANQUYEN NVARCHAR(50),
	CHUTHICH NVARCHAR(100),
)
INSERT INTO NHANVIEN VALUES ('NV0001',N'123',N'hùng','TP.HCM','0903655561','PQQuanLy',N'chủ cửa hàng')

CREATE TABLE NHACUNGCAP(
	MANCC nvarchar(50) PRIMARY KEY,
	TENNCC NVARCHAR(100) ,
	DIACHI NVARCHAR(100),
	DIENTHOAI char(10),
	CHUTHICH NVARCHAR(100),
)
INSERT INTO NHACUNGCAP VALUES (N'NCC0001',N'Công Ty TNHH Thế Giới Di Động',N'364 Cộng Hòa ,P. 13 ,Q. Tân Bình','0932115177',null)
INSERT INTO NHACUNGCAP VALUES (N'NCC0002',N'Viettel TPHCM',N'285 Cách Mạng Tháng Tám, P. 12, Q. 10,','0942981657',null)
INSERT INTO NHACUNGCAP VALUES (N'NCC0003',N'Phụ Kiện Buôn Bán',N'Số 117-119, Lý Chính Thắng, P. 7, Q. 3','0942014717',null)


CREATE TABLE KHACHHANG(
	MAKHACHHANG nvarchar(50) PRIMARY KEY,
	TENKHACHHANG NVARCHAR(100),
	DIACHI NVARCHAR(MAX),
	DIENTHOAI NVARCHAR(10),
	EMAIL NVARCHAR(50) NULL,
)
INSERT INTO KHACHHANG VALUES(N'KH0001',N'Thái Kim Hùng',N'364 Cộng Hòa ,P. 13 ,Q. Tân Bình','0932115177','hih@gmail.com' )

CREATE TABLE LOAIHANG(
	MALOAI NVARCHAR(50) PRIMARY KEY,
	TENLOAI NVARCHAR(100),
)
INSERT INTO LOAIHANG VALUES(N'Loai0001',N'Sạc, cáp')
INSERT INTO LOAIHANG VALUES(N'Loai0002',N'Ốp lưng điện thoại')
INSERT INTO LOAIHANG VALUES(N'Loai0003',N'Cường lực điện thoại')
INSERT INTO LOAIHANG VALUES(N'Loai0004',N'Điện thoại Iphone')
INSERT INTO LOAIHANG VALUES(N'Loai0005',N'Điện thoại Xiaomi')
INSERT INTO LOAIHANG VALUES(N'Loai0006',N'Điện thoại SamSung')

CREATE TABLE SANPHAM(
	MASP NVARCHAR(50) PRIMARY KEY,
	MALOAI NVARCHAR(50),
	TENHANG NVARCHAR(100),
	HINHANH NVARCHAR(MAX),
	DONGIA MONEY,
	SOLUONG INT,
	BAOHANH nvarchar(50),
	MANCC nvarchar(50),
	constraint FK_SANPHAM_LOAIHANG  foreign key (MALOAI) references LOAIHANG(MALOAI),
	constraint FK_SANPHAM_NHACUNGCAP  foreign key (MANCC) references NHACUNGCAP(MANCC),
)
INSERT INTO SANPHAM VALUES('SP0001',N'Loai0001',N'Sạc Nhanh LV0001', 'https://znews-photo.zadn.vn/w660/Uploaded/lce_jwquc/2019_09_23/Z16023092019.jpg',200000,'50',N'12 tháng',N'NCC0001');
INSERT INTO SANPHAM VALUES('SP0002',N'Loai0001',N'Cáp sạc LV0001', 'https://product.hstatic.net/1000152881/product/halo-data-micro-cable-1m-black-03_fb8f1a71717d43a19f5964b645ecc6db_master.jpg',150000,'50',N'12 tháng',N'NCC0001');
INSERT INTO SANPHAM VALUES('SP0003',N'Loai0002',N'Ốp lưng iphone 7plus/8plus ', 'https://cf.shopee.vn/file/ab2cda01c07a5a46dfa662ca88fec153',50000,'50',N'không bảo hành',N'NCC0002');
INSERT INTO SANPHAM VALUES('SP0004',N'Loai0006',N' Samsung note 20 ultra 5G', 'https://hoanghamobile.com/Uploads/Originals/2020/08/06/202008061116414539_thumbb.png;width=820;height=550;watermark=logo;crop=auto;format=jpg',15000000,'50',N'12 Tháng',N'NCC0001');
INSERT INTO SANPHAM VALUES('SP0005',N'Loai0005',N' xiaomi note ', N'xiaominote.JPG',10000000,'50',N'12 Tháng',N'NCC0001');
INSERT INTO SANPHAM VALUES('SP0006',N'Loai0005',N' xiaomi redmi ', N'xiaomiRedmi.JPG',8000000,'50',N'12 Tháng',N'NCC0001');
INSERT INTO SANPHAM VALUES('SP0007',N'Loai0005',N' xiaomi note 10plus', N'xiaomi10.JPG',6000000,'50',N'k12 Tháng',N'NCC0001');
INSERT INTO SANPHAM VALUES('SP0008',N'Loai0004',N' iphone X/XS ', N'ipX.JPG',15000000,'50',N'12 Tháng',N'NCC0002');

CREATE TABLE BAOHANH(
	MABAOHANH NVARCHAR(50) PRIMARY KEY,
	MAKHACHHANG nvarchar(50),
	MASP NVARCHAR(50),
	MANV nvarchar(50),
	YEUCAUBAOHANH NVARCHAR(MAX),
	NGAYNHAN DATE ,
	NGAYTRA DATE null,
	TINHTRANG NVARCHAR(50) default N'Đang tiến hành', 
	constraint FK_BAOHANH_KHOHANG foreign key (MASP) references SANPHAM(MASP),
	constraint FK_BAOHANH_KHACHHANG foreign key (MAKHACHHANG) references KHACHHANG(MAKHACHHANG),
	constraint FK_BAOHANH_NHANVIEN foreign key (MANV) references NHANVIEN(MANV)
)

CREATE TABLE CHITIETHOADON(
	MAHD nvarchar(50) NOT NULL,
	MASP nvarchar(50) NOT NULL,
	MAKHACHHANG nvarchar(50) NULL,
	DONGIA money NULL,
	SOLUONG int NULL,
	DONVITINH nvarchar(10) NULL DEFAULT (N'Cái'),
	THANHTIEN money NULL,
 	CONSTRAINT PK_CCHITIETHOADON PRIMARY KEY (MAHD, MASP),
	constraint FK_CHITIETHOADON_SANPHAM  foreign key (MASP) references SANPHAM(MASP),
)


CREATE TABLE CHITIETPHIEUNHAP(
	MACTPN nvarchar(50) ,
	MASP NVARCHAR(50),
	MADONDOAT nvarchar(50),
	MANV nvarchar(50),
	SOLUONG INT,
	DONGIA MONEY,-- giá bán
	DONVITINH NVARCHAR(10) default N'Cái',
	THANHTIEN MONEY,
	CONSTRAINT PK_CHITIETPHIEUNHAP PRIMARY KEY (MACTPN, MASP),
	constraint FK_CHITIETPHIEUNHAP_NV foreign key (MACTPN) references NHANVIEN(MANV),
	constraint FK_CHITIETPHIEUNHAP_SANPHAM  foreign key (MASP) references SANPHAM(MASP),
)